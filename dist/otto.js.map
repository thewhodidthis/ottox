{"version":3,"file":null,"sources":["../index.es"],"sourcesContent":["const Otto = ({ span = 1, size = 0, rule = 90 } = {}) => {\n  // Cells\n  const grid = new Uint8Array(size);\n\n  // Lookup table\n  const ruleset = rule.toString(2).split('').reverse();\n\n  // Wrap index round edges\n  // http://stackoverflow.com/questions/1082917/mod-of-negative-number-is-melting-my-brain/1082938#1082938\n  const getIndex = (a, b) => a - (b * Math.floor(a / b));\n\n  // Calculate state\n  const getState = (v, i, arr) => {\n    const state = [];\n\n    // The neighborhood\n    for (let j = -span; j <= span; j += 1) {\n      const x = getIndex(i + j, arr.length);\n      const n = arr[x] || 0;\n\n      state.push(n);\n    }\n\n    return ruleset[parseInt(state.join(''), 2)];\n  };\n\n  // Flip cell in the middle\n  grid[Math.floor(size * 0.5)] = 1;\n\n  return {\n    next: () => grid.set(grid.map(getState)),\n    grid: () => grid,\n  };\n};\n\nexport default Otto;\n\n"],"names":["Otto","span","size","rule","grid","Uint8Array","ruleset","toString","split","reverse","getIndex","a","b","Math","floor","getState","v","i","arr","state","j","x","length","n","push","parseInt","join","next","set","map"],"mappings":";;;AAAA,MAAMA,OAAO,SAAPA,IAAO,GAA4C;AAAA,EAAA,iFAAP,EAAO;AAAA,EAAA,uBAAzCC,IAAyC;AAAA,EAAA,MAAzCA,IAAyC,6BAAlC,CAAkC;AAAA,EAAA,uBAA/BC,IAA+B;AAAA,EAAA,MAA/BA,IAA+B,6BAAxB,CAAwB;AAAA,EAAA,uBAArBC,IAAqB;AAAA,EAAA,MAArBA,IAAqB,6BAAd,EAAc;;AACvD,EAAA;AACA,EAAA,MAAMC,QAAO,IAAIC,UAAJ,CAAeH,IAAf,CAAb;;AAEA,EAAA;AACA,EAAA,MAAMI,UAAUH,KAAKI,QAAL,CAAc,CAAd,EAAiBC,KAAjB,CAAuB,EAAvB,EAA2BC,OAA3B,EAAhB;;AAEA,EAAA;AACA,EAAA;AACA,EAAA,MAAMC,WAAW,SAAXA,QAAW,CAACC,CAAD,EAAIC,CAAJ;AAAA,EAAA,WAAUD,IAAKC,IAAIC,KAAKC,KAAL,CAAWH,IAAIC,CAAf,CAAnB;AAAA,EAAA,GAAjB;;AAEA,EAAA;AACA,EAAA,MAAMG,WAAW,SAAXA,QAAW,CAACC,CAAD,EAAIC,CAAJ,EAAOC,GAAP,EAAe;AAC9B,EAAA,QAAMC,QAAQ,EAAd;;AAEA,EAAA;AACA,EAAA,SAAK,IAAIC,IAAI,CAACnB,IAAd,EAAoBmB,KAAKnB,IAAzB,EAA+BmB,KAAK,CAApC,EAAuC;AACrC,EAAA,UAAMC,IAAIX,SAASO,IAAIG,CAAb,EAAgBF,IAAII,MAApB,CAAV;AACA,EAAA,UAAMC,IAAIL,IAAIG,CAAJ,KAAU,CAApB;;AAEAF,EAAAA,YAAMK,IAAN,CAAWD,CAAX;AACD,EAAA;;AAED,EAAA,WAAOjB,QAAQmB,SAASN,MAAMO,IAAN,CAAW,EAAX,CAAT,EAAyB,CAAzB,CAAR,CAAP;AACD,EAAA,GAZD;;AAcA,EAAA;AACAtB,EAAAA,QAAKS,KAAKC,KAAL,CAAWZ,OAAO,GAAlB,CAAL,IAA+B,CAA/B;;AAEA,EAAA,SAAO;AACLyB,EAAAA,UAAM;AAAA,EAAA,aAAMvB,MAAKwB,GAAL,CAASxB,MAAKyB,GAAL,CAASd,QAAT,CAAT,CAAN;AAAA,EAAA,KADD;AAELX,EAAAA,UAAM;AAAA,EAAA,aAAMA,KAAN;AAAA,EAAA;AAFD,EAAA,GAAP;AAID,EAAA,CAjCD,CAmCA;;;;"}