{"version":3,"file":null,"sources":["../index.es"],"sourcesContent":["function Ottox(options = {}, size = 0) {\n  const settings = Object.assign({}, Ottox.defaults, options);\n\n  if (typeof options === 'number') {\n    settings.rule = parseInt(options, 10);\n  }\n\n  if (size !== null && typeof size === 'number') {\n    settings.size = parseInt(size, 10);\n  }\n\n  // Generation\n  this.zoom = Math.max(parseInt(settings.zoom, 10), 0);\n\n  // Cells array\n  this.grid = new Uint8Array(settings.size);\n\n  // Rule byte string\n  this.rule = this.parseRule(settings.rule);\n\n  // Flip cell in the middle\n  this.flip(settings.size * 0.5);\n}\n\nOttox.prototype = {\n  constructor: Ottox,\n\n  flip(x) {\n    const index = parseInt(x, 10);\n\n    this.grid[index] = !this.grid[index];\n  },\n\n  next(prev) {\n    const grid = (prev && prev.length) ? prev : this.grid;\n    const size = grid.length;\n    const next = new Uint8Array(size);\n\n    for (let i = 0; i < size; i += 1) {\n      const l = (i - 1 >= 0) ? grid[i - 1] : grid[0];\n      const c = grid[i];\n      const r = (i + 1 <= grid.length - 1) ? grid[i + 1] : grid[grid.length - 1];\n\n      next[i] = this.getState(l, c, r);\n    }\n\n    this.zoom = this.zoom + 1;\n    this.grid = next;\n\n    return next;\n  },\n\n  getState(l, c, r) {\n    return this.rule[parseInt(`${l}${c}${r}`, 2)];\n  },\n\n  setRule(target) {\n    this.rule = this.parseRule(target);\n  },\n\n  parseRule(target) {\n    const output = target.toString(2);\n\n    // http://stackoverflow.com/questions/9909038/formatting-hexadecimal-number-in-javascript\n    return (`000000000${output}`).substr(-8).split('').reverse();\n  }\n};\n\nOttox.defaults = {\n  zoom: 0,\n  rule: 90,\n  size: 10,\n};\n\nexport default Ottox;\n"],"names":["Ottox","options","size","settings","Object","assign","defaults","rule","parseInt","zoom","Math","max","grid","Uint8Array","parseRule","flip","prototype","constructor","x","index","next","prev","length","i","l","c","r","getState","setRule","target","output","toString","substr","split","reverse"],"mappings":"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"}